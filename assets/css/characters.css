/* ============================================
   BloodSteel — Personajes (page overrides)
   - Fondo legible (alpha + blur)
   - Grid responsivo (retrato + texto)
   - Carrusel más usable (drag, teclado)
   - Tipografía fluida y contraste
   - Microperf: content-visibility, aspect-ratio
   ============================================ */

/* ---------- Layout base ---------- */
.char-wrap{
  display: grid;
  gap: clamp(16px, 3.5vw, 28px);
  padding-block: clamp(20px, 4vw, 40px);
  align-items: start;
}

/* ---------- Toggle de ámbito ---------- */
.char-toggle{
  display:flex;
  gap: 12px;
  align-items:center;
  padding-block: clamp(10px, 2vw, 18px);
}
.chip{
  background: transparent;
  border: 1px solid #3a3a42;
  color: var(--white-100);
  border-radius: 999px;
  padding: 8px 14px;
  cursor: pointer;
  font-size: clamp(.95rem, 1.2vw, 1.05rem);
  letter-spacing: .02em;
  transition: border-color .2s ease, color .2s ease, box-shadow .2s ease, transform .15s ease;
}
.chip:hover{ border-color: var(--gold); color: var(--gold); transform: translateY(-1px); }
.chip:focus-visible{ outline: 2px solid var(--gold); outline-offset: 2px; }
.chip.active{
  border-color: var(--gold);
  box-shadow: 0 0 0 2px rgba(160,129,0,.18) inset;
}

/* ---------- Hero del personaje ---------- */
.character-hero{
  position: relative;
  overflow: hidden;
  border: 1px solid #2c2c31;
  border-radius: var(--radius);
  background: #0E0F12;
  box-shadow: 0 10px 40px rgba(0,0,0,.35);
  scroll-margin-top: calc(64px + 12px);
  content-visibility: auto;
  contain-intrinsic-size: 800px;
}

/* Fondo de la tarjeta (imagen grande) */
.hero-bg{
  position: absolute; inset: 0;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  filter: saturate(1.05) brightness(.9);
  transform: scale(1.02);
}

/* Velo general para mejorar contraste del texto */
.hero-veil{
  position: absolute; inset: 0;
  background: linear-gradient(
    180deg,
    rgba(0,0,0,.66) 0%,
    rgba(0,0,0,.46) 45%,
    rgba(0,0,0,.28) 100%
  );
}

/* Grid interno: retrato + texto */
.hero-grid{
  position: relative; z-index: 1;
  display: grid;
  gap: clamp(14px, 2.8vw, 24px);
  padding: clamp(16px, 4vw, 28px);
  align-items: center;
}
@media (min-width: 900px){
  .hero-grid{
    grid-template-columns: minmax(240px, 40%) 1fr;
  }
}

/* ---------- Retrato (PNG recortado) ---------- */
.char-portrait{
  display: flex;
  align-items: end;
  justify-content: center;
  /* panel sutil por si el PNG no recorta perfecto */
  overflow: hidden;
}
.char-portrait img{
  max-height: min(64vh, 720px);
  max-width: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.55));
  transition: transform .35s ease, filter .35s ease;
}
@media (max-width: 899px){
  .char-portrait{ aspect-ratio: auto; }
  .char-portrait img{ max-height: 46vh; }
}
@media (hover:hover){
  .char-portrait:hover img{
    transform: scale(1.02);
    filter: drop-shadow(0 16px 36px rgba(0,0,0,.6));
  }
}

/* ---------- Texto (panel negro con alpha + blur) ---------- */
.char-info{
  background: rgba(0,0,0,.55);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.06);
  border-radius: var(--radius);
  padding: clamp(12px, 2.4vw, 18px);
  box-shadow: 0 12px 40px rgba(0,0,0,.28);
}
@media (prefers-reduced-transparency: reduce){
  .char-info{ backdrop-filter: none; -webkit-backdrop-filter: none; }
}

/* Tipografía y jerarquía */
.char-info h1{
  margin: 0 0 4px;
  font-size: clamp(1.6rem, 3.2vw, 2.2rem);
  line-height: 1.1;
  text-shadow: 0 2px 16px rgba(0,0,0,.55);
}
.role{
  margin-bottom: 10px;
  font-size: clamp(1rem, 1.4vw, 1.1rem);
  opacity: .92;
}
.desc{
  color: var(--white-200);
  max-width: 70ch;
  font-size: clamp(.98rem, 1.2vw, 1.06rem);
}
.backstory{ margin-top: 12px; }
.backstory h2{ color: var(--gold); margin: 0 0 6px; }
.backstory p{ color: var(--white-200); 
font-size: 15px;}

/* ---------- Carrusel de selección ---------- */
.char-carousel{
  position: relative;
  margin-top: 2px;
}
.char-carousel .track{
  display: flex;
  gap: 12px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  padding: 8px 0 12px;
  cursor: grab;
  scrollbar-width: thin;
}
.char-carousel .track.dragging{
  cursor: grabbing; user-select: none;
}
.char-carousel .track::-webkit-scrollbar{ height: 6px; }
.char-carousel .track::-webkit-scrollbar-thumb{
  background: linear-gradient(90deg, var(--purple), var(--gold));
  border-radius: 8px;
}

/* Flechas */
.char-carousel .arrow{
  position: absolute;
  top: 50%; transform: translateY(-50%);
  background: rgba(18,18,20,.78);
  color: var(--white-100);
  border: 1px solid #2f2f33;
  border-radius: 12px;
  padding: 10px;
  cursor: pointer;
  z-index: 2;
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
}
.char-carousel .arrow.left{ left: 6px; }
.char-carousel .arrow.right{ right: 6px; }
.char-carousel .arrow:disabled{ opacity: .45; cursor: default; }
.char-carousel .arrow:focus-visible{ outline: 2px solid var(--gold); outline-offset: 2px; }

/* Thumbs */
.thumb{
  flex: 0 0 clamp(140px, 16vw, 180px);
  scroll-snap-align: center;
  border: 1px solid #2f2f33;
  border-radius: 12px;
  overflow: hidden;
  background: linear-gradient(180deg, var(--black-800) 0, var(--black-900) 100%);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  transition: transform .2s ease, box-shadow .2s ease, outline .2s ease;
  outline: 0;
}
.thumb:hover{
  transform: translateY(-2px);
  box-shadow: 0 8px 26px rgba(0,0,0,.35);
}
.thumb.is-active,
.thumb:focus-within{
  outline: 2px solid var(--gold);
  outline-offset: 2px;
}
.thumb button{
  all: unset;
  cursor: pointer;
  width: 100%; height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
}
.thumb img{
  width: 100%;
  height: 120px;
  object-fit: cover;
  display: block;
}
.thumb .t-name{
  padding: 10px;
  font-weight: 700;
  color: var(--white-100);
  font-size: clamp(.9rem, 1.1vw, 1rem);
}

/* ---------- Utilidades ---------- */
/* Si un fondo es muy claro y quieres subir el contraste del panel */
.char-info.is-strong{
  background: rgba(0,0,0,.7);
  border-color: rgba(255,255,255,.08);
}

/* Variante sin blur (rendimiento en móviles básicos) */
.char-info.is-solid{
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  background: rgba(0,0,0,.6);
}

/* ---------- Responsive finos ---------- */
@media (max-width: 720px){
  .char-toggle{ justify-content: center; flex-wrap: wrap; }
  .thumb img{ height: 110px; }
}

/* ---------- Motion / Print ---------- */
@media (prefers-reduced-motion: reduce){
  .chip, .thumb, .char-portrait img{ transition: none !important; }
}
@media print{
  .main-header, .char-toggle, .char-carousel, .foot-grid{ display: none !important; }
  body{ background:#fff; color:#000; }
  .character-hero{ border: 0; box-shadow: none; }
  .char-info{ background:#fff; color:#000; backdrop-filter:none; -webkit-backdrop-filter:none; }
}
