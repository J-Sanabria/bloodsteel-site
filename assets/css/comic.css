/* ============================
   BloodSteel — COMIC (Overrides)
   ============================ */

:root{ --headerH: 64px; }

/* ---------- Fondo + tipografía ---------- */
body{
  background:#0A0A0B;
  color:var(--white-100);
  font-family:"Quantico", system-ui, Segoe UI, Roboto, Ubuntu, Arial;
  overflow-x:hidden;
  min-height:100vh;
}

/* Texturas: por ENCIMA del color de body y por DEBAJO del contenido */
#comic-bg{
  position:fixed; inset:0;
  pointer-events:none;
  z-index:0; /* << clave: ya no detrás del body */
  background-image:
    url('../img/comic/textures/scratched_steel.jpg');
  background-position:center,center;
  background-size:cover,600px 600px;
  background-repeat:no-repeat,repeat;
  mix-blend-mode:darken;
  opacity: 0.2; /* subimos un poco para que se note sin oscurecer */
}

/* ---------- Header sin fondo ni blur (transparente) ---------- */
.main-header{
  position:fixed; top:0; left:0; right:0;
  height:var(--headerH);
  display:flex; align-items:center; justify-content:space-between;
  padding-inline:clamp(14px,5vw,32px);
  padding-left:max(env(safe-area-inset-left),clamp(14px,5vw,32px));
  padding-right:max(env(safe-area-inset-right),clamp(14px,5vw,32px));
  background:none !important; border-bottom:none !important; backdrop-filter:none !important;
  z-index:120;
}

/* ---------- Lienzo del cómic ---------- */
#comic-view{
  position:relative;
  overflow-x:hidden; 
  overflow-y:auto;
  scroll-behavior:smooth;
  padding-top:var(--headerH);          /* << quitamos el padding que creaba el hueco */
  z-index:1;              /* << por encima de #comic-bg */
}

/* Scrollbar (WebKit) */
#comic-view::-webkit-scrollbar{ width:10px; }
#comic-view::-webkit-scrollbar-track{ background:transparent; }
#comic-view::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg,#3a3a42,#2b2b30);
  border-radius:10px; border:2px solid transparent; background-clip:content-box;
}
#comic-view::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg,#4a4a52,#3a3a42);
}

/* ---------- Viñetas (más pequeñas y SIN recortes) ---------- */
.vignette{
  overflow: hidden;
  position:relative;    /* “fuelle” visible */
  perspective:1000px;
}
/* La PRIMERA viñeta ocupa la pantalla completa (sin hueco arriba) */
#comic-view .vignette:first-child{
  margin-top:0;
  margin-bottom: 50px;
}

/* Capas: imagen completa y SIN fondo opaco */
.vignette .layer{
  position:absolute; inset:0;
  background-repeat:no-repeat;
  background-position:center center;
  background-size:contain;     /* muestra la imagen completa */
  background-color:transparent;
  will-change:transform, opacity;
  transition:opacity .35s ease-out;
  transform:translate3d(0,var(--ty),0) rotateX(var(--rx)) rotateY(var(--ry));
}

/* Profundidad suave (sin cortar) */
.vignette .bg   { z-index:1; transform:translate3d(0,var(--ty),0) rotateX(var(--rx)) rotateY(var(--ry)) scale(1.01); }
.vignette .mid  { z-index:2; transform:translate3d(0,var(--ty),0) rotateX(var(--rx)) rotateY(var(--ry)) scale(1.005); }
.vignette .front{ z-index:3; }
.vignette .text { z-index:4; pointer-events:none; }

/* Aparición */
.vignette.is-active .layer{ opacity:1; }
.vignette:not(.is-active) .layer{ opacity:0; }

/* ---------- Tira de decisiones (3 rutas) ---------- */
.choice-strip{ position:relative; z-index:1; margin-top:2vh; }
.choice-grid{ display:grid; grid-template-columns:1fr; gap:16px; padding:0 16px; }
@media (min-width:720px){
  .choice-grid{ grid-template-columns:repeat(3,1fr); gap:18px; }
}
.vignette.is-tease{
  border:1px solid #26262a; border-radius:12px; overflow:hidden;
  transition:transform .25s ease, box-shadow .25s ease;
}
.vignette.is-tease.clickable:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 30px rgba(0,0,0,.35);
}
.choice-label{
  position:absolute; left:16px; bottom:16px;
  border:1px solid var(--gold); border-radius:12px;
  background:rgba(0,0,0,.55); color:var(--white-100); font-weight:700;
}

/* ---------- Botones de decisión dentro de una viñeta ---------- */
.decision{
  position:absolute; bottom:14%; left:50%; transform:translateX(-50%);
  display:flex; gap:14px; z-index:10;
}
.decision button{
  background:rgba(0,0,0,.7);
  border:1px solid var(--gold); border-radius:12px;
  color:var(--white-100); font-weight:700; font-family:"Quantico";
  padding:10px 16px; cursor:pointer;
  transition:background .25s ease, transform .2s ease, border-color .2s ease;
}
.decision button:hover{
  background:rgba(160,129,0,.2);
  border-color:var(--purple);
  transform:translateY(-1px) scale(1.03);
}
.decision button:focus-visible{ outline:2px solid var(--gold); outline-offset:2px; }

/* ---------- Responsive ---------- */
@media (max-width:768px){
  .vignette{ height:72vh; margin-block:2.5vh; }
  .vignette.is-tease{ height:58vh; }
  .decision{ bottom:12%; gap:10px; }
  .decision button{ padding:9px 14px; font-size:.95rem; }
}
@media (min-width:1400px){
  .vignette{ height:70vh; }
}
